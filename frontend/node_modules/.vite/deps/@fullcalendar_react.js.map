{
  "version": 3,
  "sources": ["../../@fullcalendar/react/src/index.tsx"],
  "sourcesContent": ["/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport React, { Component, createRef, ReactPortal } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport {\r\n  CalendarOptions,\r\n  CalendarApi,\r\n  Calendar,\r\n} from '@fullcalendar/core'\r\nimport {\r\n  CustomRendering,\r\n  CustomRenderingStore,\r\n} from '@fullcalendar/core/internal'\r\n\r\ninterface CalendarState {\r\n  customRenderingMap: Map<string, CustomRendering<any>>\r\n}\r\n\r\nexport default class FullCalendar extends Component<CalendarOptions, CalendarState> {\r\n  static act = (f: () => void) => { f() }\r\n\r\n  private elRef = createRef<HTMLDivElement>()\r\n  private calendar: Calendar\r\n  private customRenderingRequestId: any\r\n  private handleCustomRendering: (customRendering: CustomRendering<any>) => void\r\n  private needsCustomRenderingResize = false\r\n  private isInitialRender = true\r\n\r\n  state: CalendarState = {\r\n    customRenderingMap: new Map<string, CustomRendering<any>>()\r\n  }\r\n\r\n  render() {\r\n    const portalNodes: ReactPortal[] = []\r\n\r\n    for (const customRendering of this.state.customRenderingMap.values()) {\r\n      const { generatorMeta } = customRendering\r\n      const vnode = typeof generatorMeta === 'function' ?\r\n        generatorMeta(customRendering.renderProps) :\r\n        generatorMeta\r\n\r\n      portalNodes.push(\r\n        createPortal(\r\n          vnode,\r\n          customRendering.containerEl,\r\n          customRendering.id, // key\r\n        )\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div ref={this.elRef}>\r\n        {portalNodes}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  componentDidMount() {\r\n    const customRenderingStore = new CustomRenderingStore<unknown>()\r\n    this.handleCustomRendering = customRenderingStore.handle.bind(customRenderingStore)\r\n\r\n    this.calendar = new Calendar(this.elRef.current, {\r\n      ...this.props,\r\n      handleCustomRendering: this.handleCustomRendering,\r\n    })\r\n\r\n    this.calendar.render()\r\n\r\n    customRenderingStore.subscribe((customRenderingMap) => {\r\n      if (this.isInitialRender) {\r\n        this.doCustomRendering(customRenderingMap)\r\n      } else {\r\n        this.requestCustomRendering(customRenderingMap)\r\n      }\r\n    })\r\n  }\r\n\r\n  requestCustomRendering(customRenderingMap) {\r\n    this.cancelCustomRendering()\r\n    this.customRenderingRequestId = requestAnimationFrame(() => {\r\n      FullCalendar.act(() => {\r\n        this.doCustomRendering(customRenderingMap)\r\n      })\r\n    })\r\n  }\r\n\r\n  doCustomRendering(customRenderingMap) {\r\n    this.needsCustomRenderingResize = true\r\n    this.setState({ customRenderingMap })\r\n  }\r\n\r\n  cancelCustomRendering() {\r\n    if (this.customRenderingRequestId) {\r\n      cancelAnimationFrame(this.customRenderingRequestId)\r\n      this.customRenderingRequestId = undefined\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.isInitialRender = false\r\n    this.calendar.resetOptions({\r\n      ...this.props,\r\n      handleCustomRendering: this.handleCustomRendering,\r\n    })\r\n\r\n    if (this.needsCustomRenderingResize) {\r\n      this.needsCustomRenderingResize = false\r\n      this.calendar.updateSize()\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.calendar.destroy()\r\n    this.cancelCustomRendering()\r\n  }\r\n\r\n  getApi(): CalendarApi {\r\n    return this.calendar\r\n  }\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;;AACA,mBAAyD;AACzD,uBAA6B;AAe7B,IAAqB,eAArB,MAAqB,sBAAqB,uBAAyC;EAAnF,cAAA;;AAGU,SAAA,YAAQ,wBAAS;AAIjB,SAAA,6BAA6B;AAC7B,SAAA,kBAAkB;AAE1B,SAAA,QAAuB;MACrB,oBAAoB,oBAAI,IAAG;;EA0F/B;EAvFE,SAAM;AACJ,UAAM,cAA6B,CAAA;AAEnC,eAAW,mBAAmB,KAAK,MAAM,mBAAmB,OAAM,GAAI;AACpE,YAAM,EAAE,cAAa,IAAK;AAC1B,YAAM,QAAQ,OAAO,kBAAkB,aACrC,cAAc,gBAAgB,WAAW,IACzC;AAEF,kBAAY,SACV,+BACE,OACA,gBAAgB,aAChB,gBAAgB,EAAE,CACnB;;AAIL,WACE,aAAAA,QAAA,cAAA,OAAA,EAAK,KAAK,KAAK,MAAK,GACjB,WAAW;EAGlB;EAEA,oBAAiB;AACf,UAAM,uBAAuB,IAAI,qBAAoB;AACrD,SAAK,wBAAwB,qBAAqB,OAAO,KAAK,oBAAoB;AAElF,SAAK,WAAW,IAAI,SAAS,KAAK,MAAM,SAAO,OAAA,OAAA,OAAA,OAAA,CAAA,GAC1C,KAAK,KAAK,GAAA,EACb,uBAAuB,KAAK,sBAAqB,CAAA,CAAA;AAGnD,SAAK,SAAS,OAAM;AAEpB,yBAAqB,UAAU,CAAC,uBAAsB;AACpD,UAAI,KAAK,iBAAiB;AACxB,aAAK,kBAAkB,kBAAkB;aACpC;AACL,aAAK,uBAAuB,kBAAkB;;IAElD,CAAC;EACH;EAEA,uBAAuB,oBAAkB;AACvC,SAAK,sBAAqB;AAC1B,SAAK,2BAA2B,sBAAsB,MAAK;AACzD,oBAAa,IAAI,MAAK;AACpB,aAAK,kBAAkB,kBAAkB;MAC3C,CAAC;IACH,CAAC;EACH;EAEA,kBAAkB,oBAAkB;AAClC,SAAK,6BAA6B;AAClC,SAAK,SAAS,EAAE,mBAAkB,CAAE;EACtC;EAEA,wBAAqB;AACnB,QAAI,KAAK,0BAA0B;AACjC,2BAAqB,KAAK,wBAAwB;AAClD,WAAK,2BAA2B;;EAEpC;EAEA,qBAAkB;AAChB,SAAK,kBAAkB;AACvB,SAAK,SAAS,aAAY,OAAA,OAAA,OAAA,OAAA,CAAA,GACrB,KAAK,KAAK,GAAA,EACb,uBAAuB,KAAK,sBAAqB,CAAA,CAAA;AAGnD,QAAI,KAAK,4BAA4B;AACnC,WAAK,6BAA6B;AAClC,WAAK,SAAS,WAAU;;EAE5B;EAEA,uBAAoB;AAClB,SAAK,SAAS,QAAO;AACrB,SAAK,sBAAqB;EAC5B;EAEA,SAAM;AACJ,WAAO,KAAK;EACd;;AAnGO,aAAA,MAAM,CAAC,MAAiB;AAAG,IAAC;AAAG;",
  "names": ["React"]
}
